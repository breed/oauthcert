This cli will generate a CSR for signing by an oauthcert server that can be used to setup wireguard.

# USAGE

Invoke commandline using:

java -jar wg.jar <email-address>

You will be given the file path of a CSR file to upload to an oauthcert server and told the path to download the signed certificate file to.
(Both will be in the working directory that you are running wg.jar in.)

When the signed file is downloaded, the private key is written to stdout:

    PrivateKey = <PRIVATE_KEY>

If you upload the certificate file to a wg-keyman server, it will give you a wireguard config file that you can add line above to and start using wireguard.

# WIREGUARD PUBLIC KEY EXTENSION

The CSR generated by this tool includes a wireguard public key as an X.509 extension. The oauthcert server copies this extension into the signed certificate, allowing wg-keyman to extract the public key.

## Extension Details

| Field | Value |
|-------|-------|
| OID | `1.3.6.1.4.1.99999.1` |
| Critical | No |
| Value | 32-byte Curve25519 public key (DER OCTET STRING) |

## Structure

The extension is included in the CSR as a PKCS#9 extension request attribute (OID 1.2.840.113549.1.9.14). The server copies all requested extensions into the signed certificate.

## Extracting the Public Key

To extract the wireguard public key from a signed certificate using OpenSSL:

```bash
openssl x509 -in certificate.crt -noout -text | grep -A1 "1.3.6.1.4.1.99999.1"
```

Or programmatically using BouncyCastle:

```java
X509CertificateHolder cert = // load certificate
Extension ext = cert.getExtension(new ASN1ObjectIdentifier("1.3.6.1.4.1.99999.1"));
byte[] wgPublicKey = ext.getExtnValue().getOctets();
String base64Key = Base64.getEncoder().encodeToString(wgPublicKey);
```
